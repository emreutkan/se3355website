<div class="page-container" *ngIf="movie">
  <div class="header-main">
    <h1 class="movie-title">{{ getMovieTitle(movie) }}</h1>
    <div class="title-metadata">
      <span>{{ movie.year }}</span>
      <span>R</span> <!-- Hardcoded -->
      <span>{{ movie.runtime_min }}m</span>
    </div>
  </div>

  <div class="content-grid">

    <!-- Left Column: Poster & Details -->
    <div class="column-left">
      <div class="poster-container">
        <img [src]="movie.image_url" [alt]="getMovieTitle(movie)" class="movie-poster">
      </div>
      <div class="details-container">
        <div class="genre-pills" *ngIf="movie.genre">
          <span class="genre-pill" *ngFor="let genre of movie.genre">{{ genre }}</span>
        </div>
        <p class="summary-text">{{ getMovieSummary(movie) }}</p>
        <div class="crew-info">
          <div class="crew-item" *ngIf="movie.director">
            <span class="crew-role">Director</span>
            <a href="#" class="crew-name">{{ movie.director?.join(', ') }}</a>
          </div>
          <div class="crew-item">
            <span class="crew-role">Writers</span>
            <a href="#" class="crew-name">N/A</a>
          </div>
          <div class="crew-item">
            <span class="crew-role">Stars</span>
            <span class="crew-names">
              <ng-container *ngFor="let actor of movie.actors | slice:0:3; let last = last">
                <a href="#">{{ actor.full_name }}</a>{{ !last ? ', ' : '' }}
              </ng-container>
            </span>
          </div>
        </div>
      </div>
    </div>

    <!-- Right Column: Trailer & Actions -->
    <div class="column-right">
      <div class="trailer-container">
        <ng-container *ngIf="!showTrailer; else trailerPlayer">
          <div (click)="playTrailer()" class="trailer-link" style="cursor: pointer;">
            <img [src]="movie.image_url" alt="Trailer thumbnail" class="trailer-thumbnail">
            <div class="trailer-overlay">
              <div class="play-icon-container">
                <svg class="play-icon" viewBox="0 0 24 24"><path fill="currentColor" d="M8 5v14l11-7z"></path></svg>
              </div>
              <div class="trailer-overlay-text">
                <span>Play trailer</span>
              </div>
            </div>
          </div>
        </ng-container>
        <ng-template #trailerPlayer>
          <iframe *ngIf="trailerUrl" [src]="trailerUrl" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </ng-template>
      </div>
      <div class="actions-container">
        <div class="ratings-section">
          <div class="rating-box">
            <span class="rating-heading">IMDb RATING</span>
            <div class="rating-score">
              <svg class="star-icon" viewBox="0 0 24 24"><path fill="#f5c518" d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path></svg>
              <span><strong>{{ movie.imdb_score?.toFixed(1) }}</strong>/10</span>
            </div>
          </div>
          <div class="rating-box">
            <span class="rating-heading">YOUR RATING</span>
            <button class="rate-button">
              <svg class="rate-star-icon" viewBox="0 0 24 24"><path fill="none" stroke="#5799ef" stroke-width="2" d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path></svg>
              <span class="rate-text">Rate</span>
            </button>
          </div>
        </div>
        <button class="add-to-watchlist" (click)="toggleWatchlist()">
          <ng-container *ngIf="isInWatchlist$ | async; else addToWatchlist">
            <span class="watchlist-icon added">âœ“</span>
            <span class="watchlist-text">Added</span>
          </ng-container>
          <ng-template #addToWatchlist>
            <span class="watchlist-icon ">+</span>
            <span class="watchlist-text">Add to Watchlist</span>
          </ng-template>
        </button>
      </div>
    </div>
    
  </div>
</div>
